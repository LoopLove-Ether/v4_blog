# å°å¶åšå®¢

ðŸŒ
[ç®€ä½“ä¸­æ–‡](README.md)

åŸºäºŽ`python3.7`å’Œ`Django4.2.3`çš„åšå®¢ã€‚


## ä¸»è¦åŠŸèƒ½ï¼š

- æ–‡ç« ï¼Œé¡µé¢ï¼Œåˆ†ç±»ç›®å½•ï¼Œæ ‡ç­¾çš„æ·»åŠ ï¼Œåˆ é™¤ï¼Œç¼–è¾‘ç­‰ã€‚æ–‡ç« åŠé¡µé¢æ”¯æŒ`Markdown`ï¼Œæ”¯æŒä»£ç é«˜äº®ã€‚
- æ”¯æŒæ–‡ç« æ¡ä»¶æœç´¢ã€‚
- ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½ã€‚
- å®Œæ•´çš„è¯„è®ºåŠŸèƒ½ï¼ŒåŒ…æ‹¬å‘è¡¨å›žå¤è¯„è®ºï¼Œæ”¯æŒ`Markdown`ã€‚
- ä¾§è¾¹æ åŠŸèƒ½ï¼Œæœ€æ–°æ–‡ç« ï¼Œæœ€å¤šé˜…è¯»ç­‰ã€‚
- é›†æˆäº†ä¸ƒç‰›äº‘çš„å›¾åºŠåŠŸèƒ½ã€‚

## çº¿ä¸Šç‰ˆæœ¬æ–°åŠŸèƒ½

- ç½‘ç«™å¼‚å¸¸å‘Šè­¦ï¼Œå‡ºçŽ°æ— æ³•å¤„ç†çš„å¼‚å¸¸å°†ä¼šè‡ªåŠ¨å‘é€æé†’é‚®ä»¶æˆ–çŸ­ä¿¡ã€‚
- æ–‡ç« æ—¥åŽ†åŠŸèƒ½
- ç½‘ç«™æ›´æ–°åŽ†å²
- æŽ¥å…¥ä¼ä¸šå¾®ä¿¡APIï¼Œå®žæ—¶æŽŒæ¡ç”¨æˆ·åŠ¨æ€
- eså…¨æ–‡æœç´¢ï¼Œæ–‡ç« æœç´¢åŠŸèƒ½æ›´åŠ å¼ºå¤§
- é¦–é¡µå…¨æ–‡æœç´¢ï¼Œä¸»æ‰“æ–‡ç« å†…å®¹æœç´¢ï¼Œç‚¹å‡»å¯ç›´æŽ¥è·³è½¬è‡³å¯¹åº”ä½ç½®
- æ ‡ç­¾è·³è½¬åŠŸèƒ½ï¼Œç”¨æˆ·ç‚¹å‡»å³ä¾§æ ‡ç­¾å³å¯æ˜¾ç¤ºå¯¹åº”æ ‡ç­¾ä¸‹çš„æ–‡ç« åˆ—è¡¨
- éœ€è¦è¾“å…¥å¯†ç æ‰èƒ½è®¿é—®çš„æ–‡ç« ï¼Œå¯è‡ªå®šä¹‰é¢„è§ˆæ–‡ç« çš„å†…å®¹

## é€‚ç”¨äººç¾¤
æƒ³è¦æ‹¥æœ‰ä¸€æ¬¾ä¸ªäººåšå®¢çš„äººç¾¤

### é¡¹ç›®ä¸è¶³ä¹‹å¤„

1. æ²¡æœ‰æ›´æ˜“äºŽæ‰©å±•çš„ä¸‰æ–¹ç™»å½•ï¼Œå†…ç½®çš„qqå’Œ gitee å¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†éœ€æ±‚ï¼ˆæ‚„æ‚„çš„å‘Šè¯‰ä½ ï¼Œå¾®ä¿¡ç™»å½•æ˜¯è¦é’±çš„ï¼‰
2. çŠ¶æ€ç è¿”å›žå¾ˆå‡Œä¹±ï¼Œæ‰“ç®—åœ¨åŽæœŸçš„è¿‡ç¨‹ä¸­ä¼˜åŒ–æŽ‰
3. cssä»£ç å¤§æ®µé‡å¤ï¼Œæ²¡æœ‰å‘æŒ¥å‡ºscsså®ƒåº”æœ‰çš„ä½œç”¨ï¼ŒåŽæœŸå†å¼€ä¸ªåˆ†æ”¯å¤„ç†ä¸€ä¸‹
4. ä¸èƒ½æ”¯æŒç”¨æˆ·å‘å¸ƒæ–‡ç« ï¼Œå¦‚æžœæ”¯æŒçš„è¯ï¼Œå®¡æ ¸è¿™äº›å°±å¾ˆéº»çƒ¦äº†
5. ä¸»é¢˜åŠŸèƒ½å¹¶ä¸å®Œå–„ï¼ŒåŽç»­æ‰“ç®—åœ¨ä¸ªäººä¸­å¿ƒå¤„åšä¸€ä¸ªç±»ä¼¼ä¸»é¢˜å•†åº—çš„ä¸œè¥¿ï¼ˆå…ˆç”»ä¸ªé¥¼ï¼‰
6. æ²¡æœ‰æ’ä»¶ç³»ç»Ÿï¼ŒåŽæœŸåšä¸äº†ç”Ÿæ€
7. å‰åŽç«¯ä¸åˆ†ç¦»çš„é¡¹ç›®ï¼Œé€‚åˆä¸ªäººäº§å“ï¼Œå¼€å‘è™½ç„¶å¿«ï¼Œä½†éžåŽŸä½œè€…å¯¹åŽæœŸç»´æŠ¤ç›¸å¯¹éº»çƒ¦


## é¡¹ç›®ç›®å½•

```text
+---v4_blog  é¡¹ç›®åŒåç›®å½•
|      +---__init__.py
|      +---asgi.py  asgiéƒ¨ç½²ä½¿ç”¨
|      +---wsgi.py  wsgiéƒ¨ç½²ä½¿ç”¨
|      +---settings.py  é…ç½®æ–‡ä»¶ï¼Œé‡è¦
|      +---local_settings.py æœ¬åœ°è¿è¡Œæ—¶çš„é…ç½®
|      +---urls.py  é¡¹ç›®è·¯ç”±ï¼Œé‡è¦
|
|
+---api  apiç›¸å…³çš„app
|      +---migrations  æ•°æ®åº“è¿ç§»æ–‡ä»¶
|      +---views  è§†å›¾ç›®å½•
|      |     +---admin_data.py  åŽå°çš„ä¸€äº›æ•°æ®æŽ¥å£  
|      |     +---api_email.py  é‚®ä»¶å‘é€æŽ¥å£
|      |     +---article.py  æ–‡ç« æŽ¥å£
|      |     +---comment.py  è¯„è®ºæŽ¥å£
|      |     +---file.py  æ–‡ä»¶ä¸Šä¼ æŽ¥å£
|      |     +---history.py  å›žå¿†å½•æŽ¥å£
|      |     +---login.py  ç™»å½•æ³¨å†ŒæŽ¥å£
|      |     +---mood.py  å¿ƒæƒ…æŽ¥å£
|      |     +---sites.py  ç½‘ç«™å¯¼èˆªæŽ¥å£
|      |     +---user.py  ä¿®æ”¹å¯†ç æŽ¥å£
|      |
|      +---__init__.py
|      +---admin.py
|      +---models.py  è¡¨ç»“æž„
|      +---tests.py
|      +---urls.py  apiåˆ†å‘çš„è·¯ç”±
+---app01 ä¸Žé¡µé¢ç›¸å…³çš„app
|      +---migrations
|      +---templatetags  è‡ªå®šä¹‰æ ‡ç­¾å’Œè¿‡æ»¤å™¨
|      |      +---my_filter.py  è‡ªå®šä¹‰è¿‡æ»¤å™¨
|      |      +---my_tag.py  è‡ªå®šä¹‰æ ‡ç­¾
|      |     
|      +---valid  éªŒè¯ç›¸å…³
|      |      +---auth  é‡å†™djangoçš„authenticateæ–¹æ³•
|      |
|      +---views  è§†å›¾ç›®å½•
|      +---__init__.py  app01çš„åˆå§‹åŒ–æ–‡ä»¶
|      +---admin.py  adminç»“æž„
|      +---middleware_decode.py  ç”¨äºŽè½¬æ¢axiosæ•°æ®çš„ä¸­é—´ä»¶
|      +---models.py  è¡¨ç»“æž„
|      +---tests.py
|      
+---media  ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶çš„ç›®å½•
+---static  é™æ€æ–‡ä»¶
+---templates  æ¨¡æ¿æ–‡ä»¶
|      +---backend  åŽå°ç›¸å…³çš„æ¨¡æ¿
|      |      +---add_article.html  æ·»åŠ æ–‡ç« 
|      |      +---avatar_list.html  å¤´åƒåˆ—è¡¨
|      |      +---backend.html  ä¸ªäººä¸­å¿ƒ
|      |      +---cover_list.html  æ–‡ç« å°é¢åˆ—è¡¨
|      |      +---edit_article.html  ç¼–è¾‘æ–‡ç« 
|      |      +---edit_avatar.html  ä¿®æ”¹å¤´åƒ
|      |      
|      +---my_tag   è‡ªå®šä¹‰
|      |      +---headers.html  bannerè½®æ’­å›¾
|      |
|      +---simple_admin
|      |      +---add_form.html  åŽå°é€‰æ‹©å°é¢çš„æ¨¡æ¿ä¿®æ”¹
|      |
|      +---about.html  ç½‘ç«™å…³äºŽ
|      +---admin_home.html  åŽå°çš„é¦–é¡µ
|      +---article.html  æ–‡ç« è¯¦æƒ…é¡µ
|      +---article_lock.html  åŠ é”çš„æ–‡ç« è¯¦æƒ…é¡µ
|      +---blog.html  åšå®¢é¡¹ç›®
|      +---history.html  å»ºç«™å›žå¿†å½•
|      +---index.html  é¦–é¡µ
|      +---login.html  ç™»å½•
|      +---moods.html  å¿ƒæƒ…é¡µé¢
|      +---news.html  æ–°é—»
|      +---search.html  æœç´¢
|      +---sign.html  æ³¨å†Œ
|      +---sites.html  ç½‘å€å¯¼èˆª
|
+---.gitignore  gitå¿½ç•¥æ–‡ä»¶
+---README.md  è¯´æ˜Žæ–‡æ¡£
+---blog.sql  é¡¹ç›®çš„æ•°æ®åº“æ–‡ä»¶
+---manage.py  å¯åŠ¨æ–‡ä»¶
+---requirements.txt  ç¬¬ä¸‰æ–¹æ¨¡å—
```

## å®‰è£…

1. git æ‹‰å–ä»£ç 
2. å®‰è£…æ‰€éœ€çš„ç¬¬ä¸‰æ–¹æ¨¡å—
    ```bash
    pip install -r requirements.txt
    ```

## è¿è¡Œ

ä¿®æ”¹`v4_blog/setting.py` ä¿®æ”¹æ•°æ®åº“é…ç½®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

- æ•°æ®åº“ä¿®æ”¹

```python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'blog',
        'USER': 'root',
        'PASSWORD': 'password',
        'HOST': 'host',
        'PORT': 3306,
    }
}
```

- é‚®ç®±å¯†ç ä¿®æ”¹

```python

# å‘é€é‚®ç®±é…ç½®
EMAIL_HOST = 'smtp.qq.com'  # å¯¹åº”é‚®ç®±çš„é‚®ä»¶æœåŠ¡å™¨
EMAIL_PORT = 465  # å¯¹åº”é‚®ä»¶æœåŠ¡å™¨çš„ç«¯å£
EMAIL_HOST_USER = 'ä½ çš„é‚®ç®±'
EMAIL_HOST_PASSWORD = 'ä½ çš„ç™»å½•å‡­è¯'
DEFAULT_FROM_EMAIL = EMAIL_HOST_USER
EMAIL_USE_SSL = True
EMAIL_USER_TLS = False

```

- ä¸ƒç‰›äº‘é…ç½®

```python
# ä¸ƒç‰›äº‘é…ç½®
QINIU_ACCESS_KEY = 'ä¸ƒç‰›äº‘AK'
QINIU_SECRET_KEY = 'ä¸ƒç‰›äº‘SK'
QINIU_BUCKET_NAME = 'ä¸ƒç‰›äº‘å­˜å‚¨ç©ºé—´'
QINIU_DOMAIN = 'xxx.xxx.xxx'  # è®¿é—®çš„åŸŸåï¼ŒæŒ‰ç…§è¿™æ ·çš„æ ¼å¼
```

### åˆ›å»ºæ•°æ®åº“

å¯¼å…¥æ•°æ®:

```bash
create database blog;
# è¿›å…¥åˆ›å»ºçš„åº“
use blog;
# å¯¼å…¥æ•°æ®
source  blog.sql
```

å¯¼å…¥æ•°æ®åº“ä¹‹åŽä¸éœ€è¦è¿›è¡Œæ•°æ®åº“è¿ç§»

### å¼€å§‹è¿è¡Œï¼š

æ‰§è¡Œï¼š `python manage.py runserver`

æµè§ˆå™¨æ‰“å¼€: http://127.0.0.1:8000/  å°±å¯ä»¥çœ‹åˆ°æ•ˆæžœäº†ã€‚
   
### é»˜è®¤ç®¡ç†å‘˜

```text
user: admin
password: root
```

## æœåŠ¡å™¨éƒ¨ç½²

- å¯¼å‡ºç¬¬ä¸‰æ–¹åº“

```bash
pip freeze > requirements.txt
```

- å¯¼å‡ºmysqlæ•°æ®

```bash
mysqldump -u root -p blog > blog.sql
```
